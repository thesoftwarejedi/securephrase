function generateShares(){var a=$("#txt1Secret").val(),b=parseInt($("#txt1NumShares").val()),c=parseInt($("#txt1NumRequired").val()),d=CryptoJS.enc.Hex.stringify(CryptoJS.enc.Utf8.parse(a)),e=secrets.share(d,b,c),f=$("#div1Shares");f.html("");var g="",h=$("#chkbxSafePrint").prop("checked");$("#safe-key-wrap").toggle(h),h&&(g=r.string(15,safePrintChars),$("#safePrintKey").text(g));for(var i=0;i<e.length;i++){if(e[i]=e[i].substring(1),""!=g){var j=CryptoJS.enc.Hex.parse(e[i]),k=CryptoJS.AES.encrypt(j,g);e[i]=k.toString()}else e[i]=CryptoJS.enc.Base64.stringify(CryptoJS.enc.Hex.parse(e[i]));f.append($("#tmplShare").render({text:e[i],index:i+1}))}for(var i=0;i<e.length;i++)new QRCode(document.getElementById("shareQR"+(i+1)),{text:e[i],correctLevel:QRCode.CorrectLevel.L,width:256,height:256})}function recoverShares(){try{for(var a=$("#txt2Shares").val(),b=a.split("\n"),c=$("#txt2SafePrint").val(),d=[],e=0;e<b.length;e++)0!=b[e].trim().length&&(""!=c?b[e]=CryptoJS.AES.decrypt(b[e],c):($(".safe-key-wrap").toggle(!1),b[e]=CryptoJS.enc.Hex.stringify(CryptoJS.enc.Base64.parse(b[e]))),b[e]="8"+b[e],d.push(b[e]));var f=secrets.combine(d),g=CryptoJS.enc.Utf8.stringify(CryptoJS.enc.Hex.parse(f));$("#txt2Secret").val(g)}catch(h){alert("Oh snap!  Error assembling the shares into your secret.  Double check the safe print key maybe?")}}function scanQr(){$("#qrScannerWindow").toggle(!0),$("#qrScannerWindow").html5_qrcode(function(a){$("#txt2Shares").append(a+"\n"),scanQrStop()},function(a){},function(a){alert("Error opening stream"),scanQrStop()})}function scanQrStop(){$("#qrScannerWindow").html5_qrcode_stop(),$("#qrScannerWindow").html(""),$("#qrScannerWindow").toggle(!1)}var tempRequire=require;require=null,secrets.setRNG(),require=tempRequire;var r=new Random(Random.engines.browserCrypto),safePrintChars="23456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";